<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>F1 2026 Cup</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="./assets/favicon.png">
    <meta name="theme-color" content="#e10600">
</head>
<body>
    <!-- Pantalla de carga -->
    <div id="loading" class="loading-screen">
        <h1>F1 <span>2026</span></h1>
        <p>CARGANDO BOXES...</p>
        <div class="loading-bar">
            <div class="loading-progress"></div>
        </div>
    </div>

    <!-- Aplicaci√≥n principal -->
    <div id="app" class="app-container" style="display: none;">
        <!-- P√°gina de inicio (Landing) -->
        <div id="landing-page" class="page active">
            <div class="landing-content">
                <h1>F1 <span>2026</span></h1>
                <h3>COUPLE CUP</h3>
                <div class="landing-card">
                    <p class="sub-text">SELECCIONA PILOTO</p>
                    <div class="player-buttons">
                        <button id="btn-varo" class="player-btn varo-btn">
                            <i class="fas fa-flag-checkered"></i>
                            VARO
                        </button>
                        <button id="btn-cia" class="player-btn cia-btn">
                            <i class="fas fa-flag-checkered"></i>
                            C√çA
                        </button>
                    </div>
                    <div class="season-info">
                        <p><i class="fas fa-calendar-alt"></i> TEMPORADA 2026</p>
                        <p><i class="fas fa-trophy"></i> 24 GRANDES PREMIOS</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- P√°gina principal de la app -->
        <div id="main-page" class="page">
            <!-- Header -->
            <header class="app-header">
                <button id="btn-back" class="back-btn">
                    <i class="fas fa-arrow-left"></i>
                </button>
                <h2 id="current-user">VARO</h2>
                <div class="header-actions">
                    <button id="btn-admin" class="admin-btn" style="display:none">
                        <i class="fas fa-cog"></i>
                    </button>
                    <button id="btn-refresh" class="refresh-btn">
                        <i class="fas fa-redo"></i>
                    </button>
                </div>
            </header>

            <!-- Tabs de navegaci√≥n -->
            <div class="tabs">
                <button class="tab-btn active" data-tab="race">
                    <i class="fas fa-flag-checkered"></i>
                    <span>CARRERA</span>
                </button>
                <button class="tab-btn" data-tab="season">
                    <i class="fas fa-trophy"></i>
                    <span>MUNDIAL</span>
                </button>
                <button class="tab-btn" data-tab="points">
                    <i class="fas fa-chart-line"></i>
                    <span>PUNTOS</span>
                </button>
                <button class="tab-btn" data-tab="history">
                    <i class="fas fa-hashtag"></i>
                    <span>HISTORIAL</span>
                </button>
                <button class="tab-btn" data-tab="admin" style="display:none">
                    <i class="fas fa-cog"></i>
                    <span>ADMIN</span>
                </button>
            </div>

            <!-- Contenido de las tabs -->
            <div class="tab-content">
                <!-- TAB CARRERA -->
                <div id="tab-race" class="tab-pane active">
                    <!-- √öltima apuesta del usuario -->
                    <div id="last-bet-card" class="mobile-card" style="display:none">
                        <p class="sub-text">üìù TU √öLTIMA APUESTA</p>
                        <h3 id="last-bet-race"></h3>
                        <div class="last-bet-content">
                            <div class="podium-item">
                                <div class="driver-image-container">
                                    <img id="last-bet-p2-img" src="" class="driver-img" alt="2¬∫">
                                </div>
                                <span class="sub-text">2¬∫</span>
                            </div>
                            <div class="podium-item">
                                <div class="driver-image-container">
                                    <img id="last-bet-p1-img" src="" class="driver-img" alt="1¬∫">
                                </div>
                                <span class="sub-text">1¬∫</span>
                            </div>
                            <div class="podium-item">
                                <div class="driver-image-container">
                                    <img id="last-bet-p3-img" src="" class="driver-img" alt="3¬∫">
                                </div>
                                <span class="sub-text">3¬∫</span>
                            </div>
                        </div>
                    </div>

                    <!-- Informaci√≥n del pr√≥ximo GP -->
                    <div class="mobile-card">
                        <p class="sub-text">üìÖ PR√ìXIMO GP</p>
                        <select id="gp-select" class="gp-select"></select>
                        <div class="circuit-info">
                            <div class="circuit-header">
                                <img id="circuit-flag" src="" class="flag-img" alt="Bandera">
                                <div>
                                    <h4 id="circuit-name"></h4>
                                    <p id="circuit-fecha" class="circuit-date"></p>
                                </div>
                            </div>
                            <img id="circuit-map" src="" class="map-img" alt="Mapa del circuito">
                        </div>
                    </div>

                    <!-- Formulario de apuestas -->
                    <div class="mobile-card">
                        <p class="sub-text">üéØ TU APUESTA</p>
                        <div class="podium-builder">
                            <div class="podium-item">
                                <div class="driver-image-container">
                                    <img id="p1-img" src="" class="driver-img" alt="1¬∫" style="display:none">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">1er LUGAR</label>
                                    <select id="p1-select" class="form-select">
                                        <option value="">Selecciona piloto</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="podium-item">
                                <div class="driver-image-container">
                                    <img id="p2-img" src="" class="driver-img" alt="2¬∫" style="display:none">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">2do LUGAR</label>
                                    <select id="p2-select" class="form-select">
                                        <option value="">Selecciona piloto</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="podium-item">
                                <div class="driver-image-container">
                                    <img id="p3-img" src="" class="driver-img" alt="3¬∫" style="display:none">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">3er LUGAR</label>
                                    <select id="p3-select" class="form-select">
                                        <option value="">Selecciona piloto</option>
                                    </select>
                                </div>
                            </div>
                            
                            <button id="btn-save-bet" class="btn btn-primary w-100 mt-20">
                                <i class="fas fa-save"></i> GUARDAR APUESTA
                            </button>
                        </div>
                    </div>

                    <!-- Estado de la carrera -->
                    <div class="mobile-card">
                        <p class="sub-text">üèÅ ESTADO DE LA CARRERA</p>
                        <div class="race-status">
                            <div class="status-item">
                                <i class="fas fa-clock status-icon pending"></i>
                                <div>
                                    <h4>APUESTAS ABIERTAS</h4>
                                    <p>Hasta el inicio de la carrera</p>
                                </div>
                            </div>
                            <div class="status-item">
                                <i class="fas fa-check-circle status-icon completed"></i>
                                <div>
                                    <h4>RESULTADOS</h4>
                                    <p>Disponibles despu√©s de la carrera</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TAB MUNDIAL -->
                <div id="tab-season" class="tab-pane">
                    <!-- Contenido cargado din√°micamente -->
                </div>

                <!-- TAB PUNTOS -->
                <div id="tab-points" class="tab-pane">
                    <!-- Contenido cargado din√°micamente -->
                </div>

                <!-- TAB HISTORIAL -->
                <div id="tab-history" class="tab-pane">
                    <!-- Contenido cargado din√°micamente -->
                </div>

                <!-- TAB ADMIN -->
                <div id="tab-admin" class="tab-pane">
                    <!-- Contenido cargado din√°micamente -->
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts Firebase -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <script>
        // 2. Configuraci√≥n de tu proyecto
        const firebaseConfig = {
            apiKey: "AIzaSyAlT43zrdlGrwh11pk08vdzcTk-MpxYlZU",
            authDomain: "f1couple2026.firebaseapp.com",
            databaseURL: "https://f1couple2026-default-rtdb.europe-west1.firebasedatabase.app",
            projectId: "f1couple2026",
            storageBucket: "f1couple2026.firebasestorage.app",
            messagingSenderId: "14790735712",
            appId: "1:14790735712:web:d3d6986d703d25135e5005",
            measurementId: "G-CVC3HRB11S"
        };

        // 3. Inicializaci√≥n para que sea compatible con tu app.js
        firebase.initializeApp(firebaseConfig);
        
        // Definimos 'db' globalmente para que app.js pueda usarla
        window.db = firebase.database();
        
        console.log("‚úÖ Firebase conectado correctamente");
    </script>

    <script src="app.js"></script>

    <!-- Service Worker para PWA -->
    <script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('service-worker.js')
        .then(registration => {
            console.log('‚úÖ Service Worker registrado:', registration);
        })
        .catch(error => {
            console.log('‚ùå Error registrando Service Worker:', error);
        });
    }
    </script>
    
    <!-- A√±ade esta secci√≥n ANTES del </body> -->
<div id="admin-overlay" class="admin-overlay" style="display: none;">
    <div class="admin-modal">
        <div class="admin-modal-header">
            <h3><i class="fas fa-lock"></i> ACCESO ADMINISTRADOR</h3>
            <button onclick="closeAdminModal()" class="close-btn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="admin-modal-body">
            <div class="admin-login">
                <div class="form-group">
                    <label class="form-label">CONTRASE√ëA ADMIN</label>
                    <input type="password" id="admin-password" class="form-input" 
                           placeholder="Ingresa la contrase√±a">
                </div>
                <button onclick="loginAdmin()" class="btn btn-primary w-100 mt-20">
                    <i class="fas fa-sign-in-alt"></i> INGRESAR COMO ADMIN
                </button>
                <p class="admin-hint mt-10">
                    <i class="fas fa-info-circle"></i> La contrase√±a es: <strong>F12026</strong>
                </p>
            </div>
            
            <div class="admin-status" style="display: none;">
                <div class="status-message success">
                    <i class="fas fa-check-circle"></i>
                    <span>Modo administrador activo</span>
                </div>
                <button onclick="logoutAdmin()" class="btn btn-secondary w-100 mt-20">
                    <i class="fas fa-sign-out-alt"></i> SALIR DEL MODO ADMIN
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Bot√≥n flotante para abrir admin (visible para todos) -->
<button id="global-admin-btn" class="global-admin-btn">
    <i class="fas fa-crown"></i>
    <span>ADMIN</span>
</button>

<script>
    // Contrase√±a de admin (puedes cambiarla)
    const ADMIN_PASSWORD = "F12026";
    
    // Verificar si ya est√° en modo admin
    function checkAdminStatus() {
        const isAdmin = localStorage.getItem('f1_admin') === 'true';
        const adminTab = document.querySelector('[data-tab="admin"]');
        const adminBtn = document.getElementById('global-admin-btn');
        
        if (isAdmin) {
            // Mostrar pesta√±a admin
            if (adminTab) adminTab.style.display = 'flex';
            if (adminBtn) adminBtn.classList.add('active');
            
            // Actualizar estado en el modal
            document.querySelector('.admin-login').style.display = 'none';
            document.querySelector('.admin-status').style.display = 'block';
        } else {
            // Ocultar pesta√±a admin
            if (adminTab) adminTab.style.display = 'none';
            if (adminBtn) adminBtn.classList.remove('active');
            
            // Mostrar login en el modal
            document.querySelector('.admin-login').style.display = 'block';
            document.querySelector('.admin-status').style.display = 'none';
        }
    }
    
    // Abrir modal de admin
    document.getElementById('global-admin-btn').addEventListener('click', function() {
        document.getElementById('admin-overlay').style.display = 'flex';
        checkAdminStatus();
    });
    
    // Cerrar modal
    function closeAdminModal() {
        document.getElementById('admin-overlay').style.display = 'none';
    }
    
    // Login admin
    function loginAdmin() {
        const password = document.getElementById('admin-password').value;
        
        if (password === ADMIN_PASSWORD) {
            localStorage.setItem('f1_admin', 'true');
            showNotification('‚úÖ Modo administrador activado', 'success');
            checkAdminStatus();
            closeAdminModal();
            
            // Recargar para ver cambios
            setTimeout(() => location.reload(), 1000);
        } else {
            showNotification('‚ùå Contrase√±a incorrecta', 'error');
        }
    }
    
    // Logout admin
    function logoutAdmin() {
        localStorage.removeItem('f1_admin');
        showNotification('üë§ Modo administrador desactivado', 'info');
        checkAdminStatus();
        closeAdminModal();
        
        // Recargar para ver cambios
        setTimeout(() => location.reload(), 1000);
    }
    
    // Funci√≥n auxiliar para notificaciones
    function showNotification(message, type) {
        // Tu c√≥digo de notificaciones existente
        console.log(`${type}: ${message}`);
    }
    
    // Verificar estado al cargar
    window.addEventListener('load', checkAdminStatus);
</script>
</body>
</html>